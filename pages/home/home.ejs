<!DOCTYPE html>
<html>
  <head>
    <%- include('../partials/head'); %>
  </head>
  <body>
    <%- include('../partials/navbar', {navPage: 'home'}); %>
    <div id="content" class="container">

      <% if (devMode) { %>
      <div class="card mb-4">
        <div class="card-header bg-primary text-white">Development Mode</div>
        <div class="card-body">
          <p>
            PrairieLearn is running in Development Mode. Click
            the <strong>“Load from disk”</strong> button above to load
            question and assessment definitions from JSON files on
            disk.
          </p>
          <p>
            You need to click “Load from disk” every time that a JSON
            file is changed on disk. Changes to other files (JS, HTML,
            etc) will be automatically loaded every time you navigate
            to a different page or if you reload the current page in
            your web browser.
          </p>
          <p class="mb-0">
            See
            the <a href="https://github.com/PrairieLearn/PrairieLearn/blob/master/README.md">PrairieLearn
            documentation</a> for information on creating questions
            and assessments.
          </p>
        </div>
      </div>
      <% } %>

      <%- include('../partials/advertisement'); %>

      <% if (locals.instructor_courses && instructor_courses.length > 0) { %>
        <div class="card mb-4">
          <div class="card-header bg-primary text-white">Courses with instructor access</div>

          <table class="table table-sm table-hover table-striped">
            <tbody>
              <% instructor_courses.forEach(function(course) { %>
                <tr>
                  <td class="w-50 align-middle">
                    <% if (course.do_link) { %>
                      <a href="<%= plainUrlPrefix %>/course/<%= course.id %>"><%= course.label %></a>
                    <% } else { %>
                      <%= course.label %>
                    <% } %>
                  </td>
                  <td>
                    <% course.course_instances.forEach(function(course_instance) { %>
                      <a class="btn btn-outline-primary btn-sm my-1" href="<%= plainUrlPrefix %>/course_instance/<%= course_instance.id %>/instructor">
                        <%= course_instance.label %>
                      </a>
                    <% }); %>
                  </td>
                </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
      <% } %>

      <div class="card mb-4">
        <div class="card-header bg-primary text-white d-flex align-items-center">
          <% if (locals.instructor_courses && instructor_courses.length > 0) { %>
            Courses with student access
          <% } else { %>
            Courses
          <% } %>
          <% if (authn_provider_name !== 'LTI') { %>
            <a href="<%= plainUrlPrefix %>/enroll" class="btn btn-light btn-sm ml-auto">
              <i class="fa fa-edit" aria-hidden="true"></i>
              <span class="d-none d-sm-inline">Add or remove courses</span>
            </a>
          <% } %>
        </div>

        <% if (locals.student_courses && student_courses.length == 0) { %>

          <% if (devMode) { %>
            <div class="card-body">
              No courses loaded. Click <strong>“Load from disk”</strong>
              above and then click <strong>“Home”</strong> to come back to
              this page.
            </div>
          <% } else { %> <!-- devMode -->
            <div class="card-body">
              No courses found. Use the “Add or remove courses” button to add one.
            </div>
          <% } %> <!-- devMode -->

        <% } else { %> <!-- student_courses.length -->

          <table class="table table-sm table-hover table-striped">
            <tbody>
              <% student_courses.forEach(function(course_instance) { %>
                <tr>
                  <td>
                    <a href="<%= plainUrlPrefix %>/course_instance/<%= course_instance.id %>">
                      <%= course_instance.label %>
                    </a>
                  </td>
                </tr>
              <% }); %>
            </tbody>
          </table>

        <% } %> <!-- student_courses.length -->
      </div>
    </div>
  </body>
</html>
